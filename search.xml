<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>在TTY或SSH上使用GPG，即没有GUI界面时</title>
    <url>/%E6%95%99%E7%A8%8B-Linux-%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/GPG-on-TTY/</url>
    <content><![CDATA[<p>当通过ssh远程连接到服务器，或者在纯字符界面的tty上操作时，总之就是在无GUI情况下操作时。<br />
使用gpg签名（或者通过<code>git commit -S</code>等调用gpg），会报错：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gpg: signing failed: Inappropriate ioctl for device</span><br><span class="line">gpg: [stdin]: clear-sign failed: Inappropriate ioctl for device</span><br></pre></td></tr></table></figure>
<p>原因是无法调用默认的<code>/usr/bin/pinentry-gtk-2</code>，如果你没安装GTK的话也会出现这个报错。</p>
<p>根据Arch Wiki介绍<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>，修改<code>.bashrc</code>即可（zsh同理）：</p>
<figure class="highlight bash"><figcaption><span>.bashrc</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> GPG_TTY=$(<span class="built_in">tty</span>)</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>(2023) <a href="https://wiki.archlinux.org/title/GnuPG#Invalid_IPC_response_and_Inappropriate_ioctl_for_device">ArchWiki: GnuPG§9.12 Invalid IPC response and Inappropriate ioctl for device</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">=== Invalid IPC response and Inappropriate ioctl for device ===</span><br><span class="line"></span><br><span class="line">The default pinentry program is &#123;&#123;ic|/usr/bin/pinentry-gtk-2&#125;&#125;. If &#123;&#123;Pkg|gtk2&#125;&#125; is unavailable, pinentry falls back to &#123;&#123;ic|/usr/bin/pinentry-curses&#125;&#125; and causes signing to fail:</span><br><span class="line"></span><br><span class="line">    gpg: signing failed: Inappropriate ioctl for device</span><br><span class="line">    gpg: [stdin]: clear-sign failed: Inappropriate ioctl for device</span><br><span class="line"></span><br><span class="line">You need to set the &#123;&#123;ic|GPG_TTY&#125;&#125; environment variable for the pinentry programs &#123;&#123;ic|/usr/bin/pinentry-tty&#125;&#125; and &#123;&#123;ic|/usr/bin/pinentry-curses&#125;&#125;.</span><br><span class="line"></span><br><span class="line">    $ export GPG_TTY=$(tty)</span><br></pre></td></tr></table></figure> <a href="#fnref1" class="footnote-backref">↩︎</a></li>
</ol>
</section>
]]></content>
      <categories>
        <category>教程 - Linux - 实用工具</category>
      </categories>
      <tags>
        <tag>Linux - 作为环境</tag>
        <tag>操作界面 - TTY</tag>
        <tag>操作界面 - SSH</tag>
        <tag>操作界面 - CLI</tag>
        <tag>操作界面 - non-GUI</tag>
        <tag>操作界面 - TUI</tag>
        <tag>归档和压缩 - GnuPG</tag>
      </tags>
  </entry>
  <entry>
    <title>QEMU 命令合集</title>
    <url>/%E7%AC%94%E8%AE%B0-QEMU/QEMU-Command-Collection/</url>
    <content><![CDATA[<p>俗话说，前人栽树，后人乘凉。希望能解决你的问题。</p>
<script src="https://gist.github.com/NWater23/e86dc92c4cd206f57bc754572e3f8adf.js"></script>
<span id="more"></span>
<p>另请参阅：</p>
<ul>
<li><a href="https://wiki.archlinux.org/title/QEMU">QEMU - ArchWiki</a></li>
<li><a href="https://assil.me/2020/07/08/pulseaudio-arch-libvirt.html">Fixing pulseaudio issues with QEMU/libvirt on Arch</a></li>
<li><a href="https://stackoverflow.com/questions/64560389/setting-up-pulseaudio-in-qemu">Setting up PulseAudio in QEMU</a></li>
</ul>
]]></content>
      <categories>
        <category>笔记 - QEMU</category>
      </categories>
      <tags>
        <tag>Linux - 作为环境</tag>
        <tag>虚拟化 - 软件 - QEMU</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/uncategorized/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2>
<h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>zip 解压乱码：代码页 cp936</title>
    <url>/%E6%95%99%E7%A8%8B-Linux-%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/zip-cp936/</url>
    <content><![CDATA[<p>Windows 使用的简体中文编码与 UTF-8 不兼容会导致乱码。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p>使用 <code>-O cp936</code> 选项<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> <sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup> <sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> <sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ unzip -O cp936 &lt;zip file&gt;</span><br></pre></td></tr></table></figure>
<p>也可以给 <code>-O</code> 选项使用参数：</p>
<ul>
<li><code>GBK</code></li>
<li><code>GB2312</code></li>
<li><code>GB18030</code></li>
</ul>
<span id="more"></span>
<h2 id="备选项"><a class="markdownIt-Anchor" href="#备选项"></a> 备选项 <sup class="footnote-ref"><a href="#fn6" id="fnref6:1">[6:1]</a></sup></h2>
<p>安装 7zip 和 convmv 工具：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install p7zip-full convmv</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">LANG=C</span><br><span class="line">7z x -o&#123;Directory&#125; &lt;zip file&gt;</span><br><span class="line">convmv -f gbk -t utf8 --notest -r &lt;output <span class="built_in">dir</span>&gt;</span><br><span class="line"><span class="comment"># 或者先 cd 到输出文件夹</span></span><br><span class="line">convmv -f gbk -t utf8 --notest  ./*</span><br></pre></td></tr></table></figure>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>(2003) （英文）<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=197427">#197427 - unzip: chinese filenames unwrapped on unix wrongly</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>(2014) <a href="https://www.zhihu.com/question/20523036/answer/31746415">Linux 下 zip 文件解压乱码如何解决？</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn3" class="footnote-item"><p>(2020) <a href="https://zhuanlan.zhihu.com/p/143846450">Ubuntu压缩及解压文件简介</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn4" class="footnote-item"><p>(2019) <a href="https://blog.csdn.net/qq_36441393/article/details/102639066">【技巧】linux环境下，用unzip解压zip文件时，若解压文件中存在中文，会出现中文乱码问题</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn5" class="footnote-item"><p>(2021) <a href="https://www.cnblogs.com/tesila/p/14982479.html">linux下解压zip乱码问题的解决（unzip）</a> <a href="#fnref5" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn6" class="footnote-item"><p>(2016) <a href="https://www.findhao.net/easycoding/1605">Linux文件乱码</a> <a href="#fnref6" class="footnote-backref">↩︎</a> <a href="#fnref6:1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
]]></content>
      <categories>
        <category>教程 - Linux - 实用工具</category>
      </categories>
      <tags>
        <tag>Linux - 作为环境</tag>
        <tag>归档和压缩 - zip - unzip 解压</tag>
        <tag>Windows - 作为来源</tag>
        <tag>编码字符集 - 东亚 - 中文 - cp936</tag>
        <tag>编码字符集 - 东亚 - 中文 - GB2312</tag>
        <tag>编码字符集 - 东亚 - 中文 - GBK</tag>
        <tag>编码字符集 - 东亚 - 中文 - GB18030</tag>
        <tag>问题与修复 - 乱码</tag>
      </tags>
  </entry>
</search>
